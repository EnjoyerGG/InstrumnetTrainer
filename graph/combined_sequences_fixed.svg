<svg xmlns="http://www.w3.org/2000/svg" width="1600" height="2200" viewBox="0 0 1600 2200">
<defs>
<marker id="arrow" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
<polygon points="0 0, 10 3.5, 0 7" fill="#333" />
</marker>
<style>text{font-family:Arial,Helvetica,sans-serif}</style>
</defs>
<rect width="100%" height="100%" fill="#ffffff"/>
<text x="800" y="40" text-anchor="middle" style="font-weight:700;font-size:24px;fill:#111">Percussion Trainer — Combined Sequence Diagrams</text>
<text x="800" y="70" text-anchor="middle" style="font-size:14px;fill:#555">1) Hit→HUD • 2) Start/Pause/Resume • 3) Chart Select • 4) Export</text>
<rect x="60" y="100" width="1480" height="450" rx="12" ry="12" fill="#f8f9fa" stroke="#adb5bd"/>
<text x="72" y="128" style="font-weight:700;font-size:18px;fill:#111">1) Mic Hit → Detection → HUD Update</text>
<line x1="60" y1="136" x2="1540" y2="136" stroke="#dee2e6"/>
<rect x="118.0" y="150" width="180" height="30" rx="6" ry="6" fill="#fff" stroke="#ced4da"/>
<text x="208.0" y="172" text-anchor="middle" style="font-size:14px;fill:#111">User</text>
<line x1="208.0" y1="190" x2="208.0" y2="534" stroke="#ced4da" stroke-dasharray="5 5"/>
<rect x="266.0" y="150" width="180" height="30" rx="6" ry="6" fill="#fff" stroke="#ced4da"/>
<text x="356.0" y="172" text-anchor="middle" style="font-size:14px;fill:#111">Mic (WebAudio)</text>
<line x1="356.0" y1="190" x2="356.0" y2="534" stroke="#ced4da" stroke-dasharray="5 5"/>
<rect x="414.0" y="150" width="180" height="30" rx="6" ry="6" fill="#fff" stroke="#ced4da"/>
<text x="504.0" y="172" text-anchor="middle" style="font-size:14px;fill:#111">DrumTrigger.update()</text>
<line x1="504.0" y1="190" x2="504.0" y2="534" stroke="#ced4da" stroke-dasharray="5 5"/>
<rect x="562.0" y="150" width="180" height="30" rx="6" ry="6" fill="#fff" stroke="#ced4da"/>
<text x="652.0" y="172" text-anchor="middle" style="font-size:14px;fill:#111">App (sketch.js)</text>
<line x1="652.0" y1="190" x2="652.0" y2="534" stroke="#ced4da" stroke-dasharray="5 5"/>
<rect x="710.0" y="150" width="180" height="30" rx="6" ry="6" fill="#fff" stroke="#ced4da"/>
<text x="800.0" y="172" text-anchor="middle" style="font-size:14px;fill:#111">RhythmManager</text>
<line x1="800.0" y1="190" x2="800.0" y2="534" stroke="#ced4da" stroke-dasharray="5 5"/>
<rect x="858.0" y="150" width="180" height="30" rx="6" ry="6" fill="#fff" stroke="#ced4da"/>
<text x="948.0" y="172" text-anchor="middle" style="font-size:14px;fill:#111">SweepMode</text>
<line x1="948.0" y1="190" x2="948.0" y2="534" stroke="#ced4da" stroke-dasharray="5 5"/>
<rect x="1006.0" y="150" width="180" height="30" rx="6" ry="6" fill="#fff" stroke="#ced4da"/>
<text x="1096.0" y="172" text-anchor="middle" style="font-size:14px;fill:#111">HitMarkers</text>
<line x1="1096.0" y1="190" x2="1096.0" y2="534" stroke="#ced4da" stroke-dasharray="5 5"/>
<rect x="1154.0" y="150" width="180" height="30" rx="6" ry="6" fill="#fff" stroke="#ced4da"/>
<text x="1244.0" y="172" text-anchor="middle" style="font-size:14px;fill:#111">NoteFeedback</text>
<line x1="1244.0" y1="190" x2="1244.0" y2="534" stroke="#ced4da" stroke-dasharray="5 5"/>
<rect x="1302.0" y="150" width="180" height="30" rx="6" ry="6" fill="#fff" stroke="#ced4da"/>
<text x="1392.0" y="172" text-anchor="middle" style="font-size:14px;fill:#111">p5.draw()</text>
<line x1="1392.0" y1="190" x2="1392.0" y2="534" stroke="#ced4da" stroke-dasharray="5 5"/>
<path d="M 208.0 240 L 356.0 240" style="stroke:#333;stroke-width:1.6;fill:none;marker-end:url(#arrow)"/>
<text x="282.0" y="234" text-anchor="middle" style="font-size:12px;fill:#444">play hit</text>
<path d="M 356.0 280 L 504.0 280" style="stroke:#333;stroke-width:1.6;fill:none;marker-end:url(#arrow)"/>
<text x="430.0" y="274" text-anchor="middle" style="font-size:12px;fill:#444">audio buffer</text>
<path d="M 504.0 320 L 504.0 320" style="stroke:#333;stroke-width:1.6;fill:none;marker-end:url(#arrow);stroke-dasharray:4 3"/>
<text x="504.0" y="314" text-anchor="middle" style="font-size:12px;fill:#444">_analyzeDrumFeatures() / _isDrumHit()</text>
<path d="M 504.0 360 L 652.0 360" style="stroke:#333;stroke-width:1.6;fill:none;marker-end:url(#arrow)"/>
<text x="578.0" y="354" text-anchor="middle" style="font-size:12px;fill:#444">_onTrigger(reason)</text>
<path d="M 652.0 400 L 800.0 400" style="stroke:#333;stroke-width:1.6;fill:none;marker-end:url(#arrow)"/>
<text x="726.0" y="394" text-anchor="middle" style="font-size:12px;fill:#444">registerHit()</text>
<path d="M 652.0 435 L 948.0 435" style="stroke:#333;stroke-width:1.6;fill:none;marker-end:url(#arrow)"/>
<text x="800.0" y="429" text-anchor="middle" style="font-size:12px;fill:#444">addHitNow()</text>
<path d="M 652.0 470 L 1096.0 470" style="stroke:#333;stroke-width:1.6;fill:none;marker-end:url(#arrow)"/>
<text x="874.0" y="464" text-anchor="middle" style="font-size:12px;fill:#444">addHitMarker(t)</text>
<path d="M 1392.0 510 L 1244.0 510" style="stroke:#333;stroke-width:1.6;fill:none;marker-end:url(#arrow);stroke-dasharray:4 3"/>
<text x="1318.0" y="504" text-anchor="middle" style="font-size:12px;fill:#444">render()</text>
<path d="M 1392.0 538 L 1096.0 538" style="stroke:#333;stroke-width:1.6;fill:none;marker-end:url(#arrow);stroke-dasharray:4 3"/>
<text x="1244.0" y="532" text-anchor="middle" style="font-size:12px;fill:#444">render()</text>
<rect x="60" y="580" width="1480" height="400" rx="12" ry="12" fill="#f8f9fa" stroke="#adb5bd"/>
<text x="72" y="608" style="font-weight:700;font-size:18px;fill:#111">2) Start / Pause / Resume</text>
<line x1="60" y1="616" x2="1540" y2="616" stroke="#dee2e6"/>
<rect x="155.0" y="630" width="180" height="30" rx="6" ry="6" fill="#fff" stroke="#ced4da"/>
<text x="245.0" y="652" text-anchor="middle" style="font-size:14px;fill:#111">User</text>
<line x1="245.0" y1="670" x2="245.0" y2="964" stroke="#ced4da" stroke-dasharray="5 5"/>
<rect x="340.0" y="630" width="180" height="30" rx="6" ry="6" fill="#fff" stroke="#ced4da"/>
<text x="430.0" y="652" text-anchor="middle" style="font-size:14px;fill:#111">UI: Start/Pause</text>
<line x1="430.0" y1="670" x2="430.0" y2="964" stroke="#ced4da" stroke-dasharray="5 5"/>
<rect x="525.0" y="630" width="180" height="30" rx="6" ry="6" fill="#fff" stroke="#ced4da"/>
<text x="615.0" y="652" text-anchor="middle" style="font-size:14px;fill:#111">App (sketch.js)</text>
<line x1="615.0" y1="670" x2="615.0" y2="964" stroke="#ced4da" stroke-dasharray="5 5"/>
<rect x="710.0" y="630" width="180" height="30" rx="6" ry="6" fill="#fff" stroke="#ced4da"/>
<text x="800.0" y="652" text-anchor="middle" style="font-size:14px;fill:#111">RhythmManager</text>
<line x1="800.0" y1="670" x2="800.0" y2="964" stroke="#ced4da" stroke-dasharray="5 5"/>
<rect x="895.0" y="630" width="180" height="30" rx="6" ry="6" fill="#fff" stroke="#ced4da"/>
<text x="985.0" y="652" text-anchor="middle" style="font-size:14px;fill:#111">SweepMode</text>
<line x1="985.0" y1="670" x2="985.0" y2="964" stroke="#ced4da" stroke-dasharray="5 5"/>
<rect x="1080.0" y="630" width="180" height="30" rx="6" ry="6" fill="#fff" stroke="#ced4da"/>
<text x="1170.0" y="652" text-anchor="middle" style="font-size:14px;fill:#111">RhythmSelector</text>
<line x1="1170.0" y1="670" x2="1170.0" y2="964" stroke="#ced4da" stroke-dasharray="5 5"/>
<rect x="1265.0" y="630" width="180" height="30" rx="6" ry="6" fill="#fff" stroke="#ced4da"/>
<text x="1355.0" y="652" text-anchor="middle" style="font-size:14px;fill:#111">Metronome</text>
<line x1="1355.0" y1="670" x2="1355.0" y2="964" stroke="#ced4da" stroke-dasharray="5 5"/>
<path d="M 245.0 720 L 430.0 720" style="stroke:#333;stroke-width:1.6;fill:none;marker-end:url(#arrow)"/>
<text x="337.5" y="714" text-anchor="middle" style="font-size:12px;fill:#444">click Start</text>
<path d="M 430.0 760 L 615.0 760" style="stroke:#333;stroke-width:1.6;fill:none;marker-end:url(#arrow)"/>
<text x="522.5" y="754" text-anchor="middle" style="font-size:12px;fill:#444">startCountdown()</text>
<path d="M 615.0 800 L 800.0 800" style="stroke:#333;stroke-width:1.6;fill:none;marker-end:url(#arrow)"/>
<text x="707.5" y="794" text-anchor="middle" style="font-size:12px;fill:#444">reset(); resume()</text>
<path d="M 615.0 835 L 985.0 835" style="stroke:#333;stroke-width:1.6;fill:none;marker-end:url(#arrow)"/>
<text x="800.0" y="829" text-anchor="middle" style="font-size:12px;fill:#444">snapToLeft()</text>
<path d="M 615.0 870 L 1170.0 870" style="stroke:#333;stroke-width:1.6;fill:none;marker-end:url(#arrow)"/>
<text x="892.5" y="864" text-anchor="middle" style="font-size:12px;fill:#444">setMode(...)</text>
<path d="M 615.0 905 L 1355.0 905" style="stroke:#333;stroke-width:1.6;fill:none;marker-end:url(#arrow)"/>
<text x="985.0" y="899" text-anchor="middle" style="font-size:12px;fill:#444">enable(true); setBPM(bpm)</text>
<path d="M 245.0 955 L 430.0 955" style="stroke:#333;stroke-width:1.6;fill:none;marker-end:url(#arrow)"/>
<text x="337.5" y="949" text-anchor="middle" style="font-size:12px;fill:#444">click Pause / Resume</text>
<path d="M 430.0 990 L 800.0 990" style="stroke:#333;stroke-width:1.6;fill:none;marker-end:url(#arrow)"/>
<text x="615.0" y="984" text-anchor="middle" style="font-size:12px;fill:#444">pause() / resume()</text>
<path d="M 430.0 1025 L 1355.0 1025" style="stroke:#333;stroke-width:1.6;fill:none;marker-end:url(#arrow)"/>
<text x="892.5" y="1019" text-anchor="middle" style="font-size:12px;fill:#444">enable(false/true)</text>
<rect x="60" y="1000" width="1480" height="350" rx="12" ry="12" fill="#f8f9fa" stroke="#adb5bd"/>
<text x="72" y="1028" style="font-weight:700;font-size:18px;fill:#111">3) Chart Selection &amp; Alignment</text>
<line x1="60" y1="1036" x2="1540" y2="1036" stroke="#dee2e6"/>
<rect x="216.66666666666663" y="1050" width="180" height="30" rx="6" ry="6" fill="#fff" stroke="#ced4da"/>
<text x="306.66666666666663" y="1072" text-anchor="middle" style="font-size:14px;fill:#111">User</text>
<line x1="306.66666666666663" y1="1090" x2="306.66666666666663" y2="1334" stroke="#ced4da" stroke-dasharray="5 5"/>
<rect x="463.33333333333326" y="1050" width="180" height="30" rx="6" ry="6" fill="#fff" stroke="#ced4da"/>
<text x="553.3333333333333" y="1072" text-anchor="middle" style="font-size:14px;fill:#111">ChartSelector</text>
<line x1="553.3333333333333" y1="1090" x2="553.3333333333333" y2="1334" stroke="#ced4da" stroke-dasharray="5 5"/>
<rect x="710.0" y="1050" width="180" height="30" rx="6" ry="6" fill="#fff" stroke="#ced4da"/>
<text x="800.0" y="1072" text-anchor="middle" style="font-size:14px;fill:#111">App (sketch.js)</text>
<line x1="800.0" y1="1090" x2="800.0" y2="1334" stroke="#ced4da" stroke-dasharray="5 5"/>
<rect x="956.6666666666665" y="1050" width="180" height="30" rx="6" ry="6" fill="#fff" stroke="#ced4da"/>
<text x="1046.6666666666665" y="1072" text-anchor="middle" style="font-size:14px;fill:#111">RhythmManager</text>
<line x1="1046.6666666666665" y1="1090" x2="1046.6666666666665" y2="1334" stroke="#ced4da" stroke-dasharray="5 5"/>
<rect x="1203.3333333333333" y="1050" width="180" height="30" rx="6" ry="6" fill="#fff" stroke="#ced4da"/>
<text x="1293.3333333333333" y="1072" text-anchor="middle" style="font-size:14px;fill:#111">SweepMode</text>
<line x1="1293.3333333333333" y1="1090" x2="1293.3333333333333" y2="1334" stroke="#ced4da" stroke-dasharray="5 5"/>
<path d="M 306.66666666666663 1140 L 553.3333333333333 1140" style="stroke:#333;stroke-width:1.6;fill:none;marker-end:url(#arrow)"/>
<text x="429.99999999999994" y="1134" text-anchor="middle" style="font-size:12px;fill:#444">select chartId</text>
<path d="M 553.3333333333333 1180 L 800.0 1180" style="stroke:#333;stroke-width:1.6;fill:none;marker-end:url(#arrow)"/>
<text x="676.6666666666666" y="1174" text-anchor="middle" style="font-size:12px;fill:#444">onChartChange(chart)</text>
<path d="M 800.0 1220 L 1046.6666666666665 1220" style="stroke:#333;stroke-width:1.6;fill:none;marker-end:url(#arrow)"/>
<text x="923.3333333333333" y="1214" text-anchor="middle" style="font-size:12px;fill:#444">initChart(chart)</text>
<path d="M 800.0 1255 L 1293.3333333333333 1255" style="stroke:#333;stroke-width:1.6;fill:none;marker-end:url(#arrow)"/>
<text x="1046.6666666666665" y="1249" text-anchor="middle" style="font-size:12px;fill:#444">setNotes(...), set loopMs</text>
<rect x="60" y="1390" width="1480" height="350" rx="12" ry="12" fill="#f8f9fa" stroke="#adb5bd"/>
<text x="72" y="1418" style="font-weight:700;font-size:18px;fill:#111">4) Export Sweep (Stitching)</text>
<line x1="60" y1="1426" x2="1540" y2="1426" stroke="#dee2e6"/>
<rect x="216.66666666666663" y="1440" width="180" height="30" rx="6" ry="6" fill="#fff" stroke="#ced4da"/>
<text x="306.66666666666663" y="1462" text-anchor="middle" style="font-size:14px;fill:#111">User</text>
<line x1="306.66666666666663" y1="1480" x2="306.66666666666663" y2="1724" stroke="#ced4da" stroke-dasharray="5 5"/>
<rect x="463.33333333333326" y="1440" width="180" height="30" rx="6" ry="6" fill="#fff" stroke="#ced4da"/>
<text x="553.3333333333333" y="1462" text-anchor="middle" style="font-size:14px;fill:#111">App (sketch.js)</text>
<line x1="553.3333333333333" y1="1480" x2="553.3333333333333" y2="1724" stroke="#ced4da" stroke-dasharray="5 5"/>
<rect x="710.0" y="1440" width="180" height="30" rx="6" ry="6" fill="#fff" stroke="#ced4da"/>
<text x="800.0" y="1462" text-anchor="middle" style="font-size:14px;fill:#111">ExportManager</text>
<line x1="800.0" y1="1480" x2="800.0" y2="1724" stroke="#ced4da" stroke-dasharray="5 5"/>
<rect x="956.6666666666665" y="1440" width="180" height="30" rx="6" ry="6" fill="#fff" stroke="#ced4da"/>
<text x="1046.6666666666665" y="1462" text-anchor="middle" style="font-size:14px;fill:#111">RhythmManager</text>
<line x1="1046.6666666666665" y1="1480" x2="1046.6666666666665" y2="1724" stroke="#ced4da" stroke-dasharray="5 5"/>
<rect x="1203.3333333333333" y="1440" width="180" height="30" rx="6" ry="6" fill="#fff" stroke="#ced4da"/>
<text x="1293.3333333333333" y="1462" text-anchor="middle" style="font-size:14px;fill:#111">SweepMode</text>
<line x1="1293.3333333333333" y1="1480" x2="1293.3333333333333" y2="1724" stroke="#ced4da" stroke-dasharray="5 5"/>
<path d="M 306.66666666666663 1530 L 553.3333333333333 1530" style="stroke:#333;stroke-width:1.6;fill:none;marker-end:url(#arrow)"/>
<text x="429.99999999999994" y="1524" text-anchor="middle" style="font-size:12px;fill:#444">click Export</text>
<path d="M 553.3333333333333 1570 L 800.0 1570" style="stroke:#333;stroke-width:1.6;fill:none;marker-end:url(#arrow)"/>
<text x="676.6666666666666" y="1564" text-anchor="middle" style="font-size:12px;fill:#444">handleExport()</text>
<path d="M 800.0 1610 L 1293.3333333333333 1610" style="stroke:#333;stroke-width:1.6;fill:none;marker-end:url(#arrow)"/>
<text x="1046.6666666666665" y="1604" text-anchor="middle" style="font-size:12px;fill:#444">capture current region</text>
<path d="M 800.0 1650 L 1046.6666666666665 1650" style="stroke:#333;stroke-width:1.6;fill:none;marker-end:url(#arrow);stroke-dasharray:4 3"/>
<text x="923.3333333333333" y="1644" text-anchor="middle" style="font-size:12px;fill:#444">read state (queue/page)</text>
<path d="M 800.0 1690 L 306.66666666666663 1690" style="stroke:#333;stroke-width:1.6;fill:none;marker-end:url(#arrow)"/>
<text x="553.3333333333333" y="1684" text-anchor="middle" style="font-size:12px;fill:#444">saveCanvas(name)</text>
</svg>